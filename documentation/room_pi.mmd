flowchart TD

    subgraph RoomPi["ğŸ  Room Pi"]
        Display[Display Web Dashboard<br>Every 10s Update<br>â€¢ Temp<br>â€¢ Humidity<br>â€¢ Pressure<br>â€¢ Status<br>â€¢ Next Booking]
        StatusLogic[Status Logic<br>â€¢ Auto-update on Check-in/Check-out<br>â€¢ Modifiable by Admin or Security]
        FaultAlert[Alert: When Status = 'Fault'<br>-> Notify Master Pi]
    end

    subgraph Users["ğŸ‘¥ Users"]
        CheckIn[User Check-In/Out]
    end

    subgraph Staff["ğŸ§‘â€ğŸ’¼ Admin & Security"]
        Admin[Admin - Remote Status Change]
        Security[Security - Local Status Change]
    end

    subgraph MasterPi["ğŸ–¥ï¸ Master Pi"]
        ReceiveAlert[Receive Fault Alert<br>Publish Event]
    end

    %% Connections
    CheckIn -->|Triggers Status Update| StatusLogic
    Admin -->|Remote Modify| StatusLogic
    Security -->|Local Modify| StatusLogic
    StatusLogic -->|Update Display| Display
    StatusLogic -->|If Status='Fault'| FaultAlert
    FaultAlert -->|Send Alert| MasterPi
